Index: src/traitement/edit_user.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\nrequire_once '../bdd/Database.php';\r\nrequire_once '../modele/Utilisateur.php';\r\n\r\n$bdd = new Database();\r\n$user = new Utilisateur(array(\r\n    'nom' =>$_POST['nom'],\r\n    'prenom' =>$_POST['prenom'],\r\n    'email' =>$_POST['email'],\r\n    'mdp' =>$_POST['mdp']\r\n));\r\n\r\n$user->updateUtilisateur();\r\nheader('Location: ../../vue/panelAdmin/utilisateur.php');
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/traitement/edit_user.php b/src/traitement/edit_user.php
--- a/src/traitement/edit_user.php	
+++ b/src/traitement/edit_user.php	
@@ -7,8 +7,12 @@
     'nom' =>$_POST['nom'],
     'prenom' =>$_POST['prenom'],
     'email' =>$_POST['email'],
-    'mdp' =>$_POST['mdp']
+    'mdp' =>$_POST['mdp'],
+    'admin'=>$_POST['admin'],
+    'actif'=>$_POST['actif'],
+    'id_utilisateur' =>$_POST['id']
+
 ));
 
 $user->updateUtilisateur();
-header('Location: ../../vue/panelAdmin/utilisateur.php');
\ No newline at end of file
+//header('Location: ../../vue/panelAdmin/utilisateur.php');
\ No newline at end of file
Index: src/traitement/delete_user.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\nrequire_once '../bdd/Database.php';\r\nrequire_once '../modele/Utilisateur.php';\r\n\r\n\r\n$bdd = new Database();\r\n$user = new Utilisateur(array(\r\n    'id'=>$_POST['id']\r\n));\r\n\r\n$user->deleteUtilisateur();\r\nheader('Location: ../../vue/panelAdmin/utilisateur.php');
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/traitement/delete_user.php b/src/traitement/delete_user.php
--- a/src/traitement/delete_user.php	
+++ b/src/traitement/delete_user.php	
@@ -5,7 +5,7 @@
 
 $bdd = new Database();
 $user = new Utilisateur(array(
-    'id'=>$_POST['id']
+    'id_utilisateur'=>$_POST['id']
 ));
 
 $user->deleteUtilisateur();
Index: vue/panelAdmin/utilisateur.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\nrequire_once '../../src/bdd/Database.php';\r\nrequire_once '../../src/modele/Utilisateur.php';\r\n?>\r\n\r\n\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <meta charset=\"utf-8\">\r\n    <link rel=\"stylesheet\" href=\"../assets/css/styles.css\">\r\n    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js\"></script>\r\n    <script type=\"text/javascript\" charset=\"utf8\" src=\"https://cdn.datatables.net/1.11.4/js/jquery.dataTables.js\"></script>\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js\"></script>\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.datatables.net/1.11.4/css/jquery.dataTables.css\">\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css\" rel=\"stylesheet\"\r\n          integrity=\"sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT\" crossorigin=\"anonymous\">\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js\"\r\n            integrity=\"sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8\"\r\n            crossorigin=\"anonymous\"></script>\r\n\r\n    <title>Gestion des utilisateurs</title>\r\n\r\n    <style>\r\n        body {\r\n            background-color: #fcfcfc;\r\n            background-image:  linear-gradient(135deg, #f8f8ff 25%, transparent 25%), linear-gradient(225deg, #f8f8ff 25%, transparent 25%), linear-gradient(45deg, #f8f8ff 25%, transparent 25%), linear-gradient(315deg, #f8f8ff 25%, #fcfcfc 25%);\r\n            background-position:  40px 0, 40px 0, 0 0, 0 0;\r\n            background-size: 80px 80px;\r\n            background-repeat: repeat;\r\n        }\r\n    </style>\r\n\r\n</head>\r\n\r\n<body>\r\n<div class=\"container\">\r\n    <div class=\"content\">\r\n        <h1><strong><i>Gérer les utilisateurs</i></strong>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<a href=\"homeAdmin.php\"><button class=\"btn btn-secondary\" type=\"button\">Retour</button></a></h1>\r\n        <hr>\r\n        <hr>\r\n        <h2><strong>Utilisateur :</strong></h2>\r\n        <h3>Ajout d'un utilisateur : </h3>\r\n\r\n        <form action=\"../../src/traitement/add_user.php\" method=\"post\">\r\n            <h6>Nom : </h6>\r\n            <input type=\"text\" name=\"nom\" placeholder=\"Nom de l'utilisateur\"> <br><br>\r\n            <h6>Prénom :</h6>\r\n            <input type=\"text\" name=\"prenom\" placeholder=\"Prenom de l'utilisateur\"> <br><br>\r\n            <h6>Email :</h6>\r\n            <input type=\"text\" name=\"email\" placeholder=\"Email de l'utilisateur\"> <br><br>\r\n            <h6>Mdp :</h6>\r\n            <input type=\"text\" name=\"mdp\" placeholder=\"Mdp de l'utilisateur\"> <br><br>\r\n            <h6>Admin :</h6>\r\n            <input type=\"number\" name=\"admin\" placeholder=\"0 ou 1\"> <br><br>\r\n            <h6>Actif :</h6>\r\n            <input type=\"number\" name=\"actif\" placeholder=\"0 ou 1\"> <br><br>\r\n            <input type=\"submit\" value=\"Ajouter\">\r\n        </form>\r\n        <br><br>\r\n        <h3>Liste des utilisateurs :</h3>\r\n        <?php\r\n\r\n        $liste = new Utilisateur(array());\r\n        $bdd = new Database();\r\n        $res = $liste->selectUtilisateur($bdd);\r\n        ?>\r\n        <script type=\"text/javascript\">\r\n            $(document).ready( function () {\r\n                $('#table').DataTable()\r\n            } );\r\n        </script>\r\n        <table id=\"table\" class=\"display\" style=\"width:100%\">\r\n            <thead>\r\n            <tr>\r\n                <th>ID</th>\r\n                <th>Nom de l'utilisateur</th>\r\n                <th>Prenom de l'utilisateur</th>\r\n                <th>Email de l'utilisateur</th>\r\n                <th>Mdp de l'utilisateur</th>\r\n                <th>Admin</th>\r\n                <th>Actif</th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <?php foreach ($res as $value){ ?>\r\n                <tr>\r\n                    <td><?php echo $value['id_utilisateur'];?></td>\r\n                    <td><?php echo $value['nom'];?></td>\r\n                    <td><?php echo $value['prenom'];?></td>\r\n                    <td><?php echo $value['email'];?></td>\r\n                    <td><?php echo $value['mdp'];?></td>\r\n                    <td><?php echo $value['admin'];?></td>\r\n                    <td><?php echo $value['actif'];?></td>\r\n                </tr>\r\n            <?php } ?>\r\n            </tbody>\r\n            <tfoot>\r\n            <tr>\r\n                <th>ID</th>\r\n                <th>Nom de l'utilisateur</th>\r\n                <th>Prenom de l'utilisateur</th>\r\n                <th>Email de l'utilisateur</th>\r\n                <th>Mdp de l'utilisateur</th>\r\n                <th>Admin</th>\r\n                <th>Actif</th>\r\n            </tr>\r\n            </tfoot>\r\n        </table>\r\n        <br> <br>\r\n        <form action=\"../../src/traitement/delete_user.php\" method=\"post\">\r\n            <br>\r\n            <h3>Supprimer des utilisateurs : </h3>\r\n            <p>Grâce à l'identifiant de l'utilisateur, supprimez le.</p>\r\n            <select class=\"js2\" name=\"id\" id=\"id\">\r\n                <?php\r\n                foreach ($res as $value){\r\n                    ?>\r\n                    <option value=\"<?php echo $value['id_utilisateur'] ?>\">Utilisateur n°<?php echo $value['id_utilisateur'];?></option>\r\n                    <?php\r\n                }\r\n                ?>\r\n            </select>\r\n            <br><br>\r\n            <input type=\"submit\">\r\n        </form>\r\n        <br><br>\r\n    </div>\r\n    <br>\r\n    <div>\r\n        <br>\r\n        <h3>Modification d'un Utilisateur : </h3>\r\n        <form action=\"../../src/traitement/edit_user.php\" method=\"post\">\r\n            <strong><p>Grâce à l'identifiant de l'utilisateur, selectionner l'utilisateur à modifier</p></strong>\r\n            <select class=\"js2\" name=\"id\" id=\"id\">\r\n                <?php\r\n                foreach ($res as $value){\r\n                    ?>\r\n                    <option value=\"<?php echo $value['id_utilisateur']  ?>\">Utilisateur n°<?php echo $value['id_utilisateur'];?></option>\r\n                    <?php\r\n                }\r\n                ?>\r\n            </select>\r\n            <br><br>\r\n            <strong><p>Changer les valeurs à modifier : </p></strong>\r\n\r\n            <h6>Nom : </h6>\r\n            <input type=\"text\" name=\"nom\" placeholder=\"Nom de l'utilisateur\"> <br><br>\r\n            <h6>Prénom :</h6>\r\n            <input type=\"text\" name=\"prénom\" placeholder=\"prénom de l'utilisateur\"> <br><br>\r\n            <h6>email :</h6>\r\n            <input type=\"text\" name=\"email\" placeholder=\"email de l'utilisateur\"> <br><br>\r\n            <h6>Mot de Passe :</h6>\r\n            <input type=\"text\" name=\"mdp\" placeholder=\"mot de passe de l'utilisateur\"> <br><br>\r\n\r\n            <input type=\"submit\" value=\"Modifier\">\r\n        </form>\r\n    </div>\r\n</div>\r\n<br><br>\r\n</body>\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/vue/panelAdmin/utilisateur.php b/vue/panelAdmin/utilisateur.php
--- a/vue/panelAdmin/utilisateur.php	
+++ b/vue/panelAdmin/utilisateur.php	
@@ -149,11 +149,15 @@
             <h6>Nom : </h6>
             <input type="text" name="nom" placeholder="Nom de l'utilisateur"> <br><br>
             <h6>Prénom :</h6>
-            <input type="text" name="prénom" placeholder="prénom de l'utilisateur"> <br><br>
+            <input type="text" name="prenom" placeholder="prénom de l'utilisateur"> <br><br>
             <h6>email :</h6>
             <input type="text" name="email" placeholder="email de l'utilisateur"> <br><br>
             <h6>Mot de Passe :</h6>
             <input type="text" name="mdp" placeholder="mot de passe de l'utilisateur"> <br><br>
+            <h6>Admin :</h6>
+            <input type="text" name="admin" placeholder="0 ou 1"> <br><br>
+            <h6>Actif :</h6>
+            <input type="text" name="actif" placeholder="0 ou 1"> <br><br>
 
             <input type="submit" value="Modifier">
         </form>
Index: src/modele/Utilisateur.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n\r\nclass Utilisateur\r\n{\r\n    private $id_utilisateur;\r\n    private $nom;\r\n    private $prenom;\r\n    private $email;\r\n    private $mdp;\r\n    private $admin;\r\n    private $actif;\r\n\r\n    public function __construct(array $donnees){\r\n        $this->hydrate($donnees);\r\n    }\r\n\r\n    public function hydrate(array $donnees){\r\n        foreach ($donnees as $key => $value)\r\n        {\r\n            $method = 'set'.ucfirst($key);\r\n\r\n            if (method_exists($this, $method))\r\n            {\r\n                $this->$method($value);\r\n            }\r\n        }\r\n    }\r\n\r\n    public function selectUtilisateur($bdd){\r\n        $sel = $bdd->getBdd()->prepare(\"SELECT * FROM utilisateur\");\r\n        $sel->execute();\r\n        $result = $sel->fetchAll();\r\n        return $result;\r\n    }\r\n\r\n\r\n    public function addUtilisateur($bdd){\r\n        $add = $bdd->getBdd()->prepare(\"INSERT INTO utilisateur (nom, prenom, email, mdp, admin, actif) VALUES (:nom , :prenom, :email, :mdp, :admin, :actif)\");\r\n        $add->execute(array(\r\n            'nom'=>$this->getNom(),\r\n            'prenom'=>$this->getPrenom(),\r\n            'email'=>$this->getEmail(),\r\n            'mdp'=>$this->getMdp(),\r\n            'admin'=>$this->getAdmin(),\r\n            'actif'=>$this->getActif()\r\n        ));\r\n    }\r\n\r\n    public function updateUtilisateur(){\r\n        $bdd = new Database();\r\n        $mod = $bdd->getBdd()->prepare(\"UPDATE utilisateur SET nom = :nom , prenom = :prenom, email = :email, mdp = :mdp, admin = :admin, actif = :actif WHERE id_utilisateur = :id\");\r\n        $mod->execute(array(\r\n            'nom'=>$this->getNom(),\r\n            'prenom'=>$this->getPrenom(),\r\n            'email'=>$this->getEmail(),\r\n            'mdp'=>$this->getMdp(),\r\n            'admin'=>$this->getAdmin(),\r\n            'actif'=>$this->getActif()\r\n        ));\r\n    }\r\n\r\n    public function deleteUtilisateur(){\r\n        $bdd = new Database();\r\n        $del = $bdd->getBdd()->prepare('DELETE representant FROM id_utilisateur = :id');\r\n        $del->execute(array(\r\n            'id'=>$this->getIdUtilisateur()\r\n        ));\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * @return mixed\r\n     */\r\n    public function getIdUtilisateur()\r\n    {\r\n        return $this->id_utilisateur;\r\n    }\r\n\r\n    /**\r\n     * @param mixed $id_utilisateur\r\n     */\r\n    public function setIdUtilisateur($id_utilisateur)\r\n    {\r\n        $this->id_utilisateur = $id_utilisateur;\r\n    }\r\n\r\n    /**\r\n     * @return mixed\r\n     */\r\n    public function getNom()\r\n    {\r\n        return $this->nom;\r\n    }\r\n\r\n    /**\r\n     * @param mixed $nom\r\n     */\r\n    public function setNom($nom)\r\n    {\r\n        $this->nom = $nom;\r\n    }\r\n\r\n    /**\r\n     * @return mixed\r\n     */\r\n    public function getPrenom()\r\n    {\r\n        return $this->prenom;\r\n    }\r\n\r\n    /**\r\n     * @param mixed $prenom\r\n     */\r\n    public function setPrenom($prenom)\r\n    {\r\n        $this->prenom = $prenom;\r\n    }\r\n\r\n    /**\r\n     * @return mixed\r\n     */\r\n    public function getEmail()\r\n    {\r\n        return $this->email;\r\n    }\r\n\r\n    /**\r\n     * @param mixed $email\r\n     */\r\n    public function setEmail($email)\r\n    {\r\n        $this->email = $email;\r\n    }\r\n\r\n    /**\r\n     * @return mixed\r\n     */\r\n    public function getMdp()\r\n    {\r\n        return $this->mdp;\r\n    }\r\n\r\n    /**\r\n     * @param mixed $mdp\r\n     */\r\n    public function setMdp($mdp)\r\n    {\r\n        $this->mdp = $mdp;\r\n    }\r\n\r\n    /**\r\n     * @return mixed\r\n     */\r\n    public function getAdmin()\r\n    {\r\n        return $this->admin;\r\n    }\r\n\r\n    /**\r\n     * @param mixed $admin\r\n     */\r\n    public function setAdmin($admin)\r\n    {\r\n        $this->admin = $admin;\r\n    }\r\n\r\n    /**\r\n     * @return mixed\r\n     */\r\n    public function getActif()\r\n    {\r\n        return $this->actif;\r\n    }\r\n\r\n    /**\r\n     * @param mixed $actif\r\n     */\r\n    public function setActif($actif)\r\n    {\r\n        $this->actif = $actif;\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/modele/Utilisateur.php b/src/modele/Utilisateur.php
--- a/src/modele/Utilisateur.php	
+++ b/src/modele/Utilisateur.php	
@@ -55,13 +55,15 @@
             'email'=>$this->getEmail(),
             'mdp'=>$this->getMdp(),
             'admin'=>$this->getAdmin(),
-            'actif'=>$this->getActif()
+            'actif'=>$this->getActif(),
+            'id'=>$this->getIdUtilisateur()
         ));
+        var_dump($this);
     }
 
     public function deleteUtilisateur(){
         $bdd = new Database();
-        $del = $bdd->getBdd()->prepare('DELETE representant FROM id_utilisateur = :id');
+        $del = $bdd->getBdd()->prepare('DELETE FROM utilisateur WHERE id_utilisateur = :id');
         $del->execute(array(
             'id'=>$this->getIdUtilisateur()
         ));
